/*! For license information please see 9caa1f24.9d52efcc.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{102:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return i})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return u}));var r=t(3),o=t(8),a=(t(0),t(129)),l=(t(137),{title:"GoLang",sidebar_label:"golang",description:"Pinot Client for Golang"}),i={unversionedId:"user-guide/clients/golang",id:"user-guide/clients/golang",isDocsHomePage:!1,title:"GoLang",description:"Pinot Client for Golang",source:"@site/docs/user-guide/clients/golang.md",sourceDirName:"user-guide/clients",slug:"/user-guide/clients/golang",permalink:"/docs/user-guide/clients/golang",editUrl:"https://github.com/apache/incubator-pinot/edit/master/website/docs/user-guide/clients/golang.md",version:"current",sidebar_label:"golang",frontMatter:{title:"GoLang",sidebar_label:"golang",description:"Pinot Client for Golang"}},s=[{value:"Examples",id:"examples",children:[]},{value:"Usage",id:"usage",children:[{value:"Create a Pinot Connection",id:"create-a-pinot-connection",children:[]}]},{value:"Query Pinot",id:"query-pinot",children:[]}],c={toc:s};function u(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Applications can use this golang client library to query Apache Pinot."),Object(a.b)("p",null,"Source Code Repo: ",Object(a.b)("a",{parentName:"p",href:"https://github.com/fx19880617/pinot-client-go"},"https://github.com/fx19880617/pinot-client-go")),Object(a.b)("h2",{id:"examples"},"Examples"),Object(a.b)("p",null,"Please follow this Pinot Quickstart link to install and start Pinot batch QuickStart locally."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"bin/quick-start-batch.sh\n")),Object(a.b)("p",null,"Check out Client library Github Repo"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:fx19880617/pinot-client-go.git\ncd pinot-client-go\n")),Object(a.b)("p",null,"Build and run the example application to query from Pinot Batch Quickstart"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-bash"},"go build ./examples/batch-quickstart\n./batch-quickstart\n")),Object(a.b)("h2",{id:"usage"},"Usage"),Object(a.b)("h3",{id:"create-a-pinot-connection"},"Create a Pinot Connection"),Object(a.b)("p",null,"Pinot client could be initialized through:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Zookeeper Path")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'pinotClient := pinot.NewFromZookeeper([]string{"localhost:2123"}, "", "QuickStartCluster")\n')),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"A list of broker addresses.")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'pinotClient := pinot.NewFromBrokerList([]string{"localhost:8000"})\n')),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"ClientConfig")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'pinotClient := pinot.NewWithConfig(&pinot.ClientConfig{\n    ZkConfig: &pinot.ZookeeperConfig{\n        ZookeeperPath:     zkPath,\n        PathPrefix:        strings.Join([]string{zkPathPrefix, pinotCluster}, "/"),\n        SessionTimeoutSec: defaultZkSessionTimeoutSec,\n    },\n    ExtraHTTPHeader: map[string]string{\n        "extra-header":"value",\n    },\n})\n')),Object(a.b)("h2",{id:"query-pinot"},"Query Pinot"),Object(a.b)("p",null,"Please see this ",Object(a.b)("a",{parentName:"p",href:"https://github.com/fx19880617/pinot-client-go/blob/master/examples/batch-quickstart/main.go"},"example")," for your reference."),Object(a.b)("p",null,"Code snippet:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'pinotClient, err := pinot.NewFromZookeeper([]string{"localhost:2123"}, "", "QuickStartCluster")\nif err != nil {\n    log.Error(err)\n}\nbrokerResp, err := pinotClient.ExecuteSQL("baseballStats", "select count(*) as cnt, sum(homeRuns) as sum_homeRuns from baseballStats group by teamID limit 10")\nif err != nil {\n    log.Error(err)\n}\nlog.Infof("Query Stats: response time - %d ms, scanned docs - %d, total docs - %d", brokerResp.TimeUsedMs, brokerResp.NumDocsScanned, brokerResp.TotalDocs)\n')),Object(a.b)("p",null,"Response Format"),Object(a.b)("p",null,"Query Response is defined as the struct of following:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'type BrokerResponse struct {\n    AggregationResults          []*AggregationResult `json:"aggregationResults,omitempty"`\n    SelectionResults            *SelectionResults    `json:"SelectionResults,omitempty"`\n    ResultTable                 *ResultTable         `json:"resultTable,omitempty"`\n    Exceptions                  []Exception          `json:"exceptions"`\n    TraceInfo                   map[string]string    `json:"traceInfo,omitempty"`\n    NumServersQueried           int                  `json:"numServersQueried"`\n    NumServersResponded         int                  `json:"numServersResponded"`\n    NumSegmentsQueried          int                  `json:"numSegmentsQueried"`\n    NumSegmentsProcessed        int                  `json:"numSegmentsProcessed"`\n    NumSegmentsMatched          int                  `json:"numSegmentsMatched"`\n    NumConsumingSegmentsQueried int                  `json:"numConsumingSegmentsQueried"`\n    NumDocsScanned              int64                `json:"numDocsScanned"`\n    NumEntriesScannedInFilter   int64                `json:"numEntriesScannedInFilter"`\n    NumEntriesScannedPostFilter int64                `json:"numEntriesScannedPostFilter"`\n    NumGroupsLimitReached       bool                 `json:"numGroupsLimitReached"`\n    TotalDocs                   int64                `json:"totalDocs"`\n    TimeUsedMs                  int                  `json:"timeUsedMs"`\n    MinConsumingFreshnessTimeMs int64                `json:"minConsumingFreshnessTimeMs"`\n}\n')),Object(a.b)("p",null,"Note that ",Object(a.b)("inlineCode",{parentName:"p"},"AggregationResults")," and ",Object(a.b)("inlineCode",{parentName:"p"},"SelectionResults")," are holders for PQL queries."),Object(a.b)("p",null,"Meanwhile ",Object(a.b)("inlineCode",{parentName:"p"},"ResultTable")," is the holder for SQL queries. ",Object(a.b)("inlineCode",{parentName:"p"},"ResultTable")," is defined as:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'// ResultTable is a ResultTable\ntype ResultTable struct {\n    DataSchema RespSchema      `json:"dataSchema"`\n    Rows       [][]interface{} `json:"rows"`\n}\n')),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"RespSchema")," is defined as:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'// RespSchema is response schema\ntype RespSchema struct {\n    ColumnDataTypes []string `json:"columnDataTypes"`\n    ColumnNames     []string `json:"columnNames"`\n}\n')),Object(a.b)("p",null,"There are multiple functions defined for ",Object(a.b)("inlineCode",{parentName:"p"},"ResultTable"),", like:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},"func (r ResultTable) GetRowCount() int\nfunc (r ResultTable) GetColumnCount() int\nfunc (r ResultTable) GetColumnName(columnIndex int) string\nfunc (r ResultTable) GetColumnDataType(columnIndex int) string\nfunc (r ResultTable) Get(rowIndex int, columnIndex int) interface{}\nfunc (r ResultTable) GetString(rowIndex int, columnIndex int) string\nfunc (r ResultTable) GetInt(rowIndex int, columnIndex int) int\nfunc (r ResultTable) GetLong(rowIndex int, columnIndex int) int64\nfunc (r ResultTable) GetFloat(rowIndex int, columnIndex int) float32\nfunc (r ResultTable) GetDouble(rowIndex int, columnIndex int) float64\n")),Object(a.b)("p",null,"Sample Usage is ",Object(a.b)("a",{parentName:"p",href:"https://github.com/fx19880617/pinot-client-go/blob/master/examples/batch-quickstart/main.go#L58"},"here")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-go"},'// Print Response Schema\nfor c := 0; c < brokerResp.ResultTable.GetColumnCount(); c++ {\n  fmt.Printf("%s(%s)\\t", brokerResp.ResultTable.GetColumnName(c), brokerResp.ResultTable.GetColumnDataType(c))\n}\nfmt.Println()\n\n// Print Row Table\nfor r := 0; r < brokerResp.ResultTable.GetRowCount(); r++ {\n  for c := 0; c < brokerResp.ResultTable.GetColumnCount(); c++ {\n    fmt.Printf("%v\\t", brokerResp.ResultTable.Get(r, c))\n  }\n  fmt.Println()\n}\n')))}u.isMDXComponent=!0},129:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return g}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=o.a.createContext({}),u=function(e){var n=o.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return o.a.createElement(c.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},m=o.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(t),m=r,g=p["".concat(l,".").concat(m)]||p[m]||b[m]||a;return t?o.a.createElement(g,i(i({ref:n},c),{},{components:t})):o.a.createElement(g,i({ref:n},c))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<a;c++)l[c]=t[c];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},130:function(e,n,t){var r;!function(){"use strict";var t={}.hasOwnProperty;function o(){for(var e=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var l=o.apply(null,r);l&&e.push(l)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var i in r)t.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(n,[]))||(e.exports=r)}()},137:function(e,n,t){"use strict";var r=t(0),o=t.n(r),a=t(130),l=t.n(a);t(58);n.a=function(e){var n=e.children,t=e.classNames,r=e.fill,a=e.icon,i=e.type,s=null;switch(i){case"danger":s="alert-triangle";break;case"success":s="check-circle";break;case"warning":s="alert-triangle";break;default:s="info"}return o.a.createElement("div",{className:l()(t,"alert","alert--"+i,{"alert--fill":r,"alert--icon":!1!==a}),role:"alert"},!1!==a&&o.a.createElement("i",{className:l()("feather","icon-"+(a||s))}),n)}}}]);